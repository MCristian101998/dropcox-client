<div class="container">

    <div class="navigation">
        <app-navigation></app-navigation>
    </div>

    <div class="content"
        appUpload 
        (onFileDropped)="uploadFile($event)"
        (onDragEnter) = "onDragEnter($event)">
        
        <table mat-table [dataSource]="files" class="mat-elevation-z8">

            <ng-container matColumnDef="fileName">
              <th mat-header-cell *matHeaderCellDef class="nameColumn"> Name </th>
              <td mat-cell *matCellDef="let file">
                    <img src="{{file.image}}">
                   {{file.fileName}} 
                </td>
            </ng-container>
          
            <ng-container matColumnDef="owner">
              <th mat-header-cell *matHeaderCellDef> Owner </th>
              <td mat-cell *matCellDef="let element"> {{element.uploadedByUser}} </td>
            </ng-container>
          
            <ng-container matColumnDef="lastModified" >
              <th mat-header-cell *matHeaderCellDef> Last Modified </th>
              <td mat-cell *matCellDef="let element"> {{element.modifiedDate}} </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true "></tr>

            <tr
                mat-row 
                *matRowDef="let row; columns: displayedColumns;"
                (contextmenu) = "rowRightClick($event, row)"
                (click) = "rowClick(row.id)"
                (dblclick) = "rowDoubleClick(row)"
                [ngClass] = "{'selected': selectedTableEntityId == row.id}"></tr>
          </table>

    </div>

    <div class="footer">
        <app-footer></app-footer>
    </div>
    
</div>

<div class="uploadingFile" *ngIf = "isInDrag">
    <div class="uploadingFileContainer">
        <div class="image">
            <img src = "/assets/images/upload.png">
        </div>
        <div class="text">
            <h4>Drop to upload.</h4>
        </div>
    </div>
</div>

<mat-menu 
    #options="matMenu">
    <button mat-menu-item (click) = "openCreateFolderDirectory()">
      <mat-icon>add</mat-icon>
      <span>Add Folder</span>
    </button>
</mat-menu>

<mat-menu
    #details="matMenu">

    <button 
        mat-menu-item
        (click) = "renameFile()">
        <mat-icon>drive_file_rename_outline</mat-icon>
        <span>Rename</span>
    </button>

    <button 
        mat-menu-item
        (click) = "deleteFile()">
        <mat-icon>delete</mat-icon>
        <span>Delete</span>
    </button>

    <button 
        mat-menu-item
        (click) = "downloadFile()">
        <mat-icon>file_download</mat-icon>
        <span>Download</span>
    </button>
</mat-menu>

<div 
    class="contentMenu"
    #optionsTrigger = "matMenuTrigger"
    style="visibility: hidden; position: fixed;" 
    [style.left]="menuTopLeftPosition.x" 
    [style.top]="menuTopLeftPosition.y" 
    [matMenuTriggerFor]="options">
</div>

<div
    #rightClickRowTrigger = "matMenuTrigger"
    class="tableRowRightClick"
    style="visibility: hidden; position: fixed;" 
    [style.left]="rowRightClickMenuPosition.x" 
    [style.top]="rowRightClickMenuPosition.y" 
    [matMenuTriggerFor]="details">
</div>